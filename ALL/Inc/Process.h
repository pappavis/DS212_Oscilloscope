/******************** (C) COPYRIGHT 2017 e-Design Co.,Ltd. *********************
 File Name : Process.h
 Version   : DS202 Ver 1.0                                         Author : bure
*******************************************************************************/
#ifndef __PROEESS_H
#define __PROEESS_H

#include "STM32F30x.h"
#define   PRE_SMPL    125

//==========+==========+==========+==========+==========+==========+==========+
// 当前状态 | 采样深度 | 输出模式 | 输出档位 | 输出脉宽 | 文件编号 | 测量值1  |
//----------+----------+----------+----------+----------+----------+----------+
enum        {   DPTH,      OUTM,      OUTF,      OUTW,     F_NUM,      VAL1,   
//----------+----------+----------+----------+----------+----------+----------+
//          | 测量值2  | 视窗位置 | 预采样值 | 当前标题 | 当前标签 | 编辑选择 | 
//----------+----------+----------+----------+----------+----------+----------+
                 VAL2,      VIEW,     PERS,      TITEL,     LABLE,     SELET,   
//----------+----------+----------+----------+----------+----------+----------+
//          | 同步状态 |      电池电压       |      工作电流       |
//----------+----------+----------+----------+----------+----------+----------+
                HOLD,  };//     VBAT,     VBAT_,     IBAT,     IBAT_,  
//==========+==========+==========+==========+==========+==========+==========+
  
//==========+==========+==========+==========+==========+==========+==========+
// SYNC选项 | 自动触发 | 普通触发 | 单次触发 | 扫描触发 | 随机触发 | 暂停模式 |
//----------+----------+----------+----------+----------+----------+----------+
enum        {   AUTO,      NORM,      SNGL,      SCAN,      NONE,  };
//==========+==========+==========+==========+==========+==========+==========+

//==========+==========+==========+==========+==========+==========+==========+
// TRIG选项 | 上升触发 | 下降触发 | 大于触发 | 小于触发 | 窄于触发 | 宽于触发 |
//----------+----------+----------+----------+----------+----------+----------+
enum        {   RISE,      FALL,       G_T,       L_T,      THIN,      WIDE,  };
//==========+==========+==========+==========+==========+==========+==========+

//==========+==========+==========+==========+==========+==========+==========+
// OUTM选项 | 模拟输出 | 脉冲输出 |          |          |          |          |
//----------+----------+----------+----------+----------+----------+----------+
enum        {   ANLOG,     PULSE,                                             };
//==========+==========+==========+==========+==========+==========+==========+

//==========+==========+==========+==========+==========+==========+==========+
// XiGN选项 |  增益=20 |  增益=10 |  增益=5  |  增益=2  |  增益=1  |          |         
//----------+----------+----------+----------+----------+----------+----------+
enum        {    x20,       x10,        x5,        x2,        x1,             };
//==========+==========+==========+==========+==========+==========+==========+

//==========+==========+==========+==========+==========+==========+==========+
// VALx选项 | Ai有效值 | Ai峰峰值 | Ai最大值 | Ai最小值 | Ai平均值 | Ai中间值 |
//----------+----------+----------+----------+----------+----------+----------+
enum        {   aRMS,      aP_P,      aMIN,      aMAX,      aAVG,      aMID, 
//----------+----------+----------+----------+----------+----------+----------+
//          | Bi有效值 | Bi峰峰值 | Bi最大值 | Bi最小值 | Bi平均值 | Bi中间值 |
//----------+----------+----------+----------+----------+----------+----------+
                bRMS,      bP_P,      bMIN,      bMAX,      bAVG,      bMID, 
//----------+----------+----------+----------+----------+----------+----------+
//          |  电位差  |  时间差  |  频率值  |           |
//----------+----------+----------+----------+----------+----------+----------+
                V1_2,      T1_2,      TWTH,             };
//==========+==========+==========+==========+==========+==========+==========+


extern u8   Norm_Clr, SNGL_Kflag;
extern u16  Smpl[];
extern uc8  GK[];
extern s16  *KpA, *KpB, *KgA, *KgB, Kpg[];
extern u8   Fit_TB;;
extern s32  PmaxA, PmaxB, PminA, PminB, PavgA, PavgB,PrmsA, PrmsB,PvppA,PvppB,PmidA, PmidB;
extern u32  HighA, HighB, LowA,  LowB,  EdgeA, EdgeB,PssqA, PssqB;
extern u8*  V_Buf;
extern u16  T0_PerCnt;
extern u8   FitWait_Cnt ;
extern s16  Trigger_k ,Ch1_Posi, Ch2_Posi,Ch3_Posi, Tri_Posi;

void Process(void);
void Zero_Align(void);
void Slope_Align(u8 Item);
void Set_Base(u8 Base);
void Auto_Fit(void);
void Fit(void);

#endif /*__PROEESS_H*/
/******************************** END OF FILE *********************************/
